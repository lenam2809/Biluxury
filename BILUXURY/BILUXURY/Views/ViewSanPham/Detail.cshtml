
@{
    ViewBag.Title = "Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var listsp = ViewBag.lsp;
    var listnews = ViewBag.news;
}


<div>
    <div class="container">
        <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Trang chủ</a></li>
                <li class="breadcrumb-item active" aria-current="page">@ViewBag.tensp</li>
            </ol>
        </nav>
    </div>

    <div class="container">
        <div class="row" style="padding-top: 10px;">
            <div class="col-md-5">
                <div class="row">
                    <div class="col-1">
                        <a id="test2" href="#" data-image="@ViewBag.image" data-zoom-image="@ViewBag.image">
                            <img src="@ViewBag.image" class="img-fluid mb-3" style="max-width: 60px; max-height: 90px; padding-bottom: 5px;" alt="...">
                        </a>
                        <a href="#" class="img-fluid mb-3" data-image="@ViewBag.image" data-zoom-image="@ViewBag.image">
                            <img src="/imgs/details-imgs/a2.png" style="max-width: 60px; max-height: 90px; padding-bottom: 5px;" alt="...">
                        </a>
                        <a href="#" class="img-fluid mb-3" data-image="@ViewBag.image" data-zoom-image="@ViewBag.image">
                            <img src="/imgs/details-imgs/a2.png" style="max-width: 60px; max-height: 90px; padding-bottom: 5px;" alt="...">
                        </a>
                        <a href="#" class="img-fluid mb-3" data-image="@ViewBag.image" data-zoom-image="@ViewBag.image">
                            <img src="/imgs/details-imgs/a3.png" style="max-width: 60px; max-height: 90px; padding-bottom: 5px;" alt="...">
                        </a>
                        <a id="test" href="#" data-image="@ViewBag.image" data-zoom-image="@ViewBag.image">
                            <img class="img-fluid mb-3" src="~/imgs/details-imgs/sizeAo.png" style="max-width: 60px; max-height: 90px;" alt="...">
                        </a>
                    </div>
                    <div class="col-11 ps-1">
                        <img id="result" src="@ViewBag.image" data-zoom-image="@ViewBag.image" class="img-fluid ms-4 ps-2" style="max-width: 460px; max-height: 690px;" alt="...">
                    </div>
                    <div class="btn"><h5>Mô tả sản phẩm</h5></div>
                    <div class="content">
                        <p>
                            Áo làm từ 100% Polyester là kết cấu sợi vải bền chắc, dẻo dai, phòng ngừa vi khuẩn và kiểm soát nhiệt tốt. Vải chống thấm nước, cản gió, thoáng khí, ấm áp tạo cảm giác thoải mái khi mặc cùng các trang phục khác
                        </p>
                    </div>
                    <form action="/ViewSanPham/Comment">
                        <div class="form-group">
                            <input style="display: none;" name="id" value="@ViewBag.id" />
                            <textarea class="form-control" rows="5" id="comment" placeholder="Comment" name="comment"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Comment</button>
                    </form>
                </div>
                
            </div>

            <div class="col-md-4">
                <div>
                    <h3>@ViewBag.tensp</h3>
                    @{
                        decimal gia = @ViewBag.Gia;
                        var result = gia.ToString("#,###");
                    }
                    <p>Giá: <span class="fw-bold">@result &#8363;</span></p>
                    <p>Chất liệu: @ViewBag.cl</p>
                    <p>Kiểu dáng: @ViewBag.kd</p>


                    <div class="form-group">
                        <label>Size: </label>
                        <select>
                            <option>39</option>
                            <option>40</option>
                            <option>41</option>
                            <option>42</option>
                            <option>43</option>
                        </select>
                    </div>
                    <br />
                    <div>
                        <label>Số lượng: </label>
                        <input id="number" type="number" value="1" min="1" />
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-md-5">
                            <button type="button" id="btnAddItem" @*onclick="location.href='@Url.Action("AddItem", "Cart", new { masp = ViewBag.masp, soluong = 1 })'"*@ class="btn btn-dark">Thêm vào giỏ</button>
                        </div>
                        <div class="col-md-5">
                            <button id="btnThanhToan" type="button" class="btn btn-success">Mua Ngay</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                @foreach (var item in listnews)
                {
                    <div class="card mb-3 my-2" style="max-width: 540px;">
                        <div class="row g-0">
                            <div class="col-md-6">
                                <img src="@item.LinkAnh" class="img-thumbnail" alt="...">
                            </div>
                            <div class="col-md-6">
                                <div class="card-body">
                                    <p class="card-title fw-bold" style="font-size: small;">@item.TieuDe</p>
                                    <p><small class="text-muted"><i class="fas fa-user"></i>  @item.NguoiTao</small></p>
                                    <button class="btn btn-outline-secondary" onclick="location.href='@Url.Action("Detail", "ViewNews", new { id = item.ID })'"><i class="fas fa-arrow-right"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>

    <div class="container-fuild">
        <div class="ms-4">
            <h3>Sản phẩm có thể bạn thích</h3>
            <hr>
        </div>
        <div class="row justify-content-center" style="padding-top: 50px;">
            @foreach (var itemsp in listsp)
            {
                <div class="card col-3 text-center" style="padding: 50px 25px 5px 25px; border: none;">
                    <img src="@itemsp.LinkAnh" class="card-img-top" alt="...">
                    <div class="card-body text-lg-center">
                        <div class="product-info">
                            <div class="product-title" style="font-size: small;">
                                <a class="a-product" href="#">@itemsp.TenSP</a>
                            </div>
                            <div class="product-price">
                                <span class="current-price">@itemsp.Gia&#8363;</span>
                            </div>
                            <div class="d-grid gap-2">
                                <button id="btn-test" onclick="location.href='@Url.Action("Detail", "ViewSanPham", new { id = itemsp.MaSP })'" type="button" class="btn btn-dark"><i style="margin-right: 15px;" class="fas fa-eye"></i>Xem chi tiết</button>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

@section Scripts {

    <script src="https://cdnjs.cloudflare.com/ajax/libs/elevatezoom/2.2.3/jquery.elevatezoom.min.js"></script>
    <script>

        $("#result").elevateZoom({
            zoomType: "lens",
            lensShape: "round",
            lensSize: 300
        });

        $('#test').on('click', function (event) {
            $('#result').attr('src', '/imgs/details-imgs/sizeAo.png');
            $('.zoomLens').attr('style', 'background - image: url("/imgs/details-imgs/sizeAo.png")');
        });
        $('#test2').on('click', function (event) {
            $('#result').attr('src', '@ViewBag.image');
        });


        $('#btnAddItem').off('click').on('click', function () {
            var msp = @ViewBag.masp;
            var sl = $('#number').val();
            window.location.href = '/Cart/AddItem/' + msp + '/' + sl;
        });

        $('#btnThanhToan').off('click').on('click', function () {
            var msp = @ViewBag.masp;
            var sl = $('#number').val();
            window.location.href = '/Cart/MuaNgay/' + msp + '/' + sl;
        });

    </script>
}


